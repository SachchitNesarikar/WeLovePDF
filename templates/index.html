<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ILovePDF v2</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #f5f7fa;
      margin: 0;
      padding: 30px;
      text-align: center;
    }
    h1 {
      color: #e53935;
      margin-bottom: 20px;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap: 20px;
      justify-items: center;
    }
    .card {
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      padding: 20px;
      width: 100%;
      max-width: 350px;
      transition: transform 0.2s ease;
    }
    .card:hover { transform: translateY(-5px); }
    .card h2 {
      color: #d32f2f;
      margin-bottom: 10px;
    }
    form {
      display: flex;
      flex-direction: column;
      gap: 10px;
      text-align: left;
    }
    .row {
      display: flex;
      gap: 10px;
    }
    .half {
      flex: 1;
      display: flex;
      flex-direction: column;
    }
    input[type="file"],
    input[type="number"],
    input[type="text"] {
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }
    button {
      background: #d32f2f;
      color: white;
      border: none;
      padding: 10px;
      border-radius: 5px;
      cursor: pointer;
      transition: background 0.3s;
    }
    button:hover { background: #b71c1c; }
    .add-btn {
      background: #555;
      margin-top: 5px;
    }
    .preview-list {
      font-size: 0.9em;
      color: #555;
      background: #fafafa;
      border-radius: 5px;
      padding: 5px;
      max-height: 100px;
      overflow-y: auto;
    }
    footer {
      margin-top: 40px;
      color: #777;
    }
  </style>
</head>
<body>
  <h1> WeLovePDF </h1>

  <!-- FIRST ROW OF TOOLS -->
<div class="grid">

  <!-- IMAGE TO PDF -->
  <div class="card">
    <h2>üñºÔ∏è Image ‚û°Ô∏è PDF</h2>
    <form id="imageForm" action="/image_to_pdf" method="post" enctype="multipart/form-data">
      <label>Select Images:</label>
      <input type="file" id="imageInput" name="image_files" accept="image/*" multiple required>
      <button type="button" class="add-btn" id="addImageBtn">+ Add More Images</button>
      <div class="preview-list" id="imagePreviewList">No images added yet</div>
      <label>Output File Name:</label>
      <input type="text" name="output_name" placeholder="MyImagePDF">
      <button type="submit">Convert to PDF</button>
    </form>
  </div>

  <!-- SPLIT PDF -->
  <div class="card">
    <h2>‚úÇÔ∏è Split PDF</h2>
    <form action="/split" method="post" enctype="multipart/form-data">
      <label>Select PDF File:</label>
      <input type="file" name="pdf_file" required>
      <div class="row">
        <div class="half">
          <label>Start Page:</label>
          <input type="number" name="start_page" required>
        </div>
        <div class="half">
          <label>End Page:</label>
          <input type="number" name="end_page" required>
        </div>
      </div>
      <label>Output File Name:</label>
      <input type="text" name="output_name" placeholder="MySplitFile">
      <button type="submit">Split PDF</button>
    </form>
  </div>

  <!-- MERGE PDF -->
  <div class="card">
    <h2>üîó Merge PDFs</h2>
    <form id="mergeForm" action="/merge" method="post" enctype="multipart/form-data">
      <label>Select PDF Files:</label>
      <input type="file" id="mergeInput" name="pdf_files" accept="application/pdf" multiple required>
      <button type="button" class="add-btn" id="addMergeBtn">+ Add More PDFs</button>
      <div class="preview-list" id="mergePreviewList">No PDFs added yet</div>
      <label>Output File Name:</label>
      <input type="text" name="output_name" placeholder="MyMergedFile">
      <button type="submit">Merge PDFs</button>
    </form>
  </div>

  <!-- DELETE PDF PAGES -->
  <div class="card">
    <h2>üóëÔ∏è Delete PDF Pages</h2>
    <form action="/delete_pages" method="post" enctype="multipart/form-data">
      <label>Select PDF File:</label>
      <input type="file" name="pdf_file" required>
      <div class="row">
        <div class="half">
          <label>Pages to Delete:</label>
          <input type="text" name="pages_to_delete" placeholder="1,3,5">
        </div>
        <div class="half">
          <label>Output File Name:</label>
          <input type="text" name="output_name" placeholder="PDFAfterDelete">
        </div>
      </div>
      <button type="submit">Delete Pages</button>
    </form>
  </div>

</div>

<!-- SECOND ROW FOR COMPRESSION -->
<div class="grid" style="margin-top: 40px;">
  <!-- COMPRESS PDF -->
  <div class="card">
    <h2>üìâ Compress PDF</h2>
    <form action="/compress" method="post" enctype="multipart/form-data">
      <label>Select PDF File:</label>
      <input type="file" name="pdf_file" required>
      <div class="row">
        <div class="half">
          <label>Compression Quality:</label>
          <select name="quality">
            <option value="low">Low</option>
            <option value="medium" selected>Medium</option>
            <option value="high">High</option>
          </select>
        </div>
        <div class="half">
          <label>Output File Name:</label>
          <input type="text" name="output_name" placeholder="CompressedPDF">
        </div>
      </div>
      <button type="submit">Compress PDF</button>
    </form>
  </div>
</div>



  <footer>
    Made with ‚ù§Ô∏è in Python & Flask
  </footer>

  <script>
    // === IMAGE HANDLER ===
    const imageInput = document.getElementById("imageInput");
    const addImageBtn = document.getElementById("addImageBtn");
    const imagePreviewList = document.getElementById("imagePreviewList");
    let allImageFiles = [];

    addImageBtn.addEventListener("click", () => {
      const newInput = document.createElement("input");
      newInput.type = "file";
      newInput.accept = "image/*";
      newInput.multiple = true;
      newInput.click();

      newInput.addEventListener("change", (e) => {
        const newFiles = Array.from(e.target.files);
        allImageFiles.push(...newFiles);
        updatePreview(allImageFiles, imagePreviewList, imageInput);
      });
    });

    imageInput.addEventListener("change", (e) => {
      allImageFiles = Array.from(e.target.files);
      updatePreview(allImageFiles, imagePreviewList, imageInput);
    });

    // === MERGE HANDLER ===
    const mergeInput = document.getElementById("mergeInput");
    const addMergeBtn = document.getElementById("addMergeBtn");
    const mergePreviewList = document.getElementById("mergePreviewList");
    let allMergeFiles = [];

    addMergeBtn.addEventListener("click", () => {
      const newInput = document.createElement("input");
      newInput.type = "file";
      newInput.accept = "application/pdf";
      newInput.multiple = true;
      newInput.click();

      newInput.addEventListener("change", (e) => {
        const newFiles = Array.from(e.target.files);
        allMergeFiles.push(...newFiles);
        updatePreview(allMergeFiles, mergePreviewList, mergeInput);
      });
    });

    mergeInput.addEventListener("change", (e) => {
      allMergeFiles = Array.from(e.target.files);
      updatePreview(allMergeFiles, mergePreviewList, mergeInput);
    });

    // === COMMON PREVIEW UPDATER ===
    function updatePreview(fileList, previewList, inputEl) {
      if (fileList.length === 0) {
        previewList.textContent = "No files added yet";
        return;
      }
      previewList.innerHTML = "";
      fileList.forEach((file, i) => {
        const div = document.createElement("div");
        div.textContent = `${i + 1}. ${file.name}`;
        previewList.appendChild(div);
      });

      // Replace inputEl's files
      const dt = new DataTransfer();
      fileList.forEach(file => dt.items.add(file));
      inputEl.files = dt.files;
    }
  </script>
</body>
</html>